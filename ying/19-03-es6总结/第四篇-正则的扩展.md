##### 1.RegExp æ„é€ å‡½æ•°

```
es5-æ–¹æ³•1ï¼š
var regex = new RegExp('xyz', 'i');
es5-æ–¹æ³•2ï¼š
var regex = new RegExp(/xyz/i);
// å‡ç­‰ä»·äº
var regex = /xyz/i;

// es5ä¸å…è®¸æ­¤æ—¶ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æ·»åŠ ä¿®é¥°ç¬¦
var regex = new RegExp(/xyz/, 'i'); //æŠ¥é”™
```

es6ï¼š
new RegExp(/abc/ig, 'i').flags
//å¯ä»¥å…è®¸æ·»åŠ ç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¿®é¥°ç¬¦ä¼šæ›¿æ¢ç¬¬ä¸€ä¸ªæ­£åˆ™å¯¹è±¡çš„ä¿®é¥°ç¬¦

##### å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•

å­—ç¬¦ä¸²å¯¹è±¡å…±æœ‰ 4 ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼šmatch()ã€replace()ã€search()å’Œ split()

```
'hahahh'.match('a') //å­—ç¬¦ä¸²
'hahahh'.match(/a/g) //æ­£åˆ™
```

##### u ä¿®é¥°ç¬¦

ES6 å¯¹æ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº† u ä¿®é¥°ç¬¦
/^\uD83D/u.test('\uD83D\uDC2A') // false
/^\uD83D/.test('\uD83D\uDC2A') // true
es5 ä¸æ”¯æŒå››ä¸ªå­—èŠ‚çš„ UTF-16 ç¼–ç ï¼Œä¼šå°†\uD83D\uDC2A å³"ğŸª"è¿™ç§å½¢å¼è¯†åˆ«ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œå¯¼è‡´æ­£åˆ™è·å–æ—¶å‘ç°é‡Œé¢æœ‰\uD83D å°±ç½®ä¸º trueï¼Œå®é™…ä¸Šï¼Œ\uD83D åªæ˜¯"ğŸª"çš„ä¸€éƒ¨åˆ†ã€‚è€ŒåŠ ä¸Š uï¼Œes6 ä¼šè¯†åˆ«ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æ‰èƒ½æ­£ç¡®æ ¡éªŒä¸º false.

##### RegExp.prototype.unicode å±æ€§

æ­£åˆ™å®ä¾‹å¯¹è±¡æ–°å¢ unicode å±æ€§ï¼ŒéªŒè¯æ˜¯å¦è®¾ç½®äº† u ä¿®é¥°ç¬¦ã€‚
const r1 = /hello/;
const r2 = /hello/u;
r1.unicode // false
r2.unicode // true

##### y ä¿®é¥°ç¬¦

y ä¿®é¥°ç¬¦çš„ä½œç”¨ä¸ g ä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼Œåä¸€æ¬¡åŒ¹é…éƒ½ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸçš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ã€‚
ä¸åŒä¹‹å¤„åœ¨äºï¼Œg ä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å°±å¯ï¼Œè€Œ y ä¿®é¥°ç¬¦ç¡®ä¿åŒ¹é…å¿…é¡»ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹.

```
var s = 'aaa_aa_a';
var r1 = /a+/g;
var r2 = /a+/y;

r1.exec(s) // ["aaa"]
r2.exec(s) // ["aaa"]

r1.exec(s) // ["aa"]
r2.exec(s) // null
```

##### RegExp.prototype.sticky å±æ€§

ES6 çš„æ­£åˆ™å®ä¾‹å¯¹è±¡å¤šäº† sticky å±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº† y ä¿®é¥°ç¬¦ã€‚
var r = /hello\d/y;
r.sticky // true

##### RegExp.prototype.flags å±æ€§

ES6 ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ–°å¢äº† flags å±æ€§ï¼Œä¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ã€‚
es5 çš„ sourceï¼Œè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„æ­£æ–‡
/abc/ig.source //abc
es6 çš„ flags,è¿”å›ä¿®é¥°ç¬¦
/abc/ig.flags //gi

##### s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼

æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç‚¹ï¼ˆ.ï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä»£è¡¨ä»»æ„çš„å•ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªä¾‹å¤–ã€‚ä¸€ä¸ªæ˜¯å››ä¸ªå­—èŠ‚çš„ UTF-16 å­—ç¬¦ï¼Œè¿™ä¸ªå¯ä»¥ç”¨ u ä¿®é¥°ç¬¦è§£å†³ï¼›å¦ä¸€ä¸ªæ˜¯è¡Œç»ˆæ­¢ç¬¦ï¼ˆline terminator characterï¼‰ã€‚
è¡Œç»ˆæ­¢ç¬¦ï¼š
U+000A æ¢è¡Œç¬¦ï¼ˆ\nï¼‰
U+000D å›è½¦ç¬¦ï¼ˆ\rï¼‰
U+2028 è¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰
U+2029 æ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰

```
/foo.bar/.test('fooabar') //true
/foo.bar/.test('foo\nbar') //false
è§£å†³æ–¹æ¡ˆ
/foo[^]bar/.test('foo\nbar') // true
/foo.bar/s.test('foo\nbar') // true ä¼˜
éªŒè¯æ˜¯å¦ä½¿ç”¨sï¼Œç”¨dotAll
const re = /foo.bar/s;
re.dotAll // true
```

##### åè¡Œæ–­è¨€

â€œå…ˆè¡Œæ–­è¨€â€æŒ‡çš„æ˜¯ï¼Œx åªæœ‰åœ¨ y å‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/x(?=y)/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ç™¾åˆ†å·ä¹‹å‰çš„æ•°å­—ï¼Œè¦å†™æˆ/\d+(?=%)/ã€‚

â€œå…ˆè¡Œå¦å®šæ–­è¨€â€æŒ‡çš„æ˜¯ï¼Œx åªæœ‰ä¸åœ¨ y å‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/x(?!y)/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ä¸åœ¨ç™¾åˆ†å·ä¹‹å‰çš„æ•°å­—ï¼Œè¦å†™æˆ/\d+(?!%)/ã€‚

/\d+(?=%)/.exec('100%88')//100
/\d+(?!%)/.exec('100%88')//88

â€œåè¡Œæ–­è¨€â€æ­£å¥½ä¸â€œå…ˆè¡Œæ–­è¨€â€ç›¸åï¼Œx åªæœ‰åœ¨ y åé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?<=y)x/ã€‚â€œåè¡Œæ–­è¨€â€æ­£å¥½ä¸â€œå…ˆè¡Œæ–­è¨€â€ç›¸åï¼Œx åªæœ‰åœ¨ y åé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?<=y)x/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ç¾å…ƒç¬¦å·ä¹‹åçš„æ•°å­—ï¼Œè¦å†™æˆ/(?<=\$)\d+/ã€‚
/(?<=%)\d+/.exec('88%44')//44
/(?<=%)\d+/.exec('88% 44') //null å³ x åªæœ‰åœ¨ y åé¢æ‰åŒ¹é…
ä¸å…ˆè¡Œå¦å®šæ–­è¨€çš„åŒºåˆ«æ˜¯
/\d+(?!%)/.exec('58%44') //5 å…ˆè¡Œå¦å®šæ–­è¨€æ˜¯åªè¦ä¸åœ¨%å·å‰é¢å³æ˜¯ã€‚
/\d+(?!%)/.exec('å¤§è¨è¾¾%44') //44

â€œåè¡Œå¦å®šæ–­è¨€â€åˆ™ä¸â€œå…ˆè¡Œå¦å®šæ–­è¨€â€ç›¸åï¼Œx åªæœ‰ä¸åœ¨ y åé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?<!y)x/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ä¸åœ¨ç¾å…ƒç¬¦å·åé¢çš„æ•°å­—ï¼Œè¦å†™æˆ/(?<!\$)\d+/ã€‚
/(?<!\$)\d+/.exec('$24') //4
/(?<!\$)\d+/.exec('356$24') //356

##### Unicode å±æ€§ç±»

ES2018 å¼•å…¥äº†ä¸€ç§æ–°çš„ç±»çš„å†™æ³•\p{...}å’Œ\P{...}ï¼Œå…è®¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç¬¦åˆ Unicode æŸç§å±æ€§çš„æ‰€æœ‰å­—ç¬¦

##### å…·åç»„åŒ¹é…

```
const RE_DATE = /(\d{4})-(\d{2})-(\d{2})/;
const matchObj = RE_DATE.exec('1999-12-31');
const year = matchObj[1]; // 1999
const month = matchObj[2]; // 12
const day = matchObj[3]; // 31
```

```
ES2018 å¼•å…¥äº†å…·åç»„åŒ¹é…ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…æŒ‡å®šä¸€ä¸ªåå­—ï¼Œæ—¢ä¾¿äºé˜…è¯»ä»£ç ï¼Œåˆä¾¿äºå¼•ç”¨ã€‚
æ¨¡å¼çš„å¤´éƒ¨æ·»åŠ â€œé—®å· + å°–æ‹¬å· + ç»„åâ€ï¼ˆ?<year>ï¼‰ã€‚
execæ–¹æ³•è¿”å›ç»“æœçš„groupså±æ€§ä¸Šå¼•ç”¨è¯¥ç»„åã€‚åŒæ—¶ï¼Œæ•°å­—åºå·ï¼ˆmatchObj[1]ï¼‰ä¾ç„¶æœ‰æ•ˆã€‚
const RE_DATE = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
const matchObj = RE_DATE.exec('1999-12-31');
const year = matchObj.groups.year; // 1999
const month = matchObj.groups.month; // 12
const day = matchObj.groups.day; // 31
```

##### String.prototype.matchAll

å¯ä»¥ä¸€æ¬¡æ€§å–å‡ºæ‰€æœ‰åŒ¹é…ã€‚ä¸è¿‡ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨ï¼ˆIteratorï¼‰ï¼Œè€Œä¸æ˜¯æ•°ç»„ã€‚

```
const string = 'test1test2test3';
// g ä¿®é¥°ç¬¦åŠ ä¸åŠ éƒ½å¯ä»¥
const regex = /t(e)(st(\d?))/g;
for (const match of string.matchAll(regex)) {
  console.log(match);
}
// ["test1", "e", "st1", "1", index: 0, input: "test1test2test3"]
// ["test2", "e", "st2", "2", index: 5, input: "test1test2test3"]
// ["test3", "e", "st3", "3", index: 10, input: "test1test2test3"]

??? æŠ¥é”™String.prototype.matchAll is not function

// è½¬ä¸ºæ•°ç»„æ–¹æ³•ä¸€
[...string.matchAll(regex)]

// è½¬ä¸ºæ•°ç»„æ–¹æ³•äºŒ
Array.from(string.matchAll(regex));
```
